## How to Run the clients
The service has some AMQP and MQTT clients to ease testing and development, and they can be executed at the same time.
In order to have AMQP and MQTT exchange correctly messages the exchange name has to be fixed to `amq.topic` of type `topic`. Any other exchange name will no route messages
to the topic / routing key specified by MQTT/AMQP

```shell
cd topic-manager/cmd/clients

# Run AMQP Consumer
go run amqp/consumer/main.go -exchangeName amq.topic -exchangeType topic -queueName camera1 -key alerts

# Run AMQP Producer
go run amqp/producer/main.go -exchangeName amq.topic -exchangeType topic -key alerts

# Run MQTT Consumer
go run mqtt/consumer/main.go -key alerts

# Run MQTT Producer
go run mqtt/producer/main.go -key alerts
```
These clients are for dev / test use only, but we can run them with several flags such as:
- `exchangeName`: specifies an exchange name which will be created if not present. Exchanges starting with `amq.` are reserved.
- `exchangeType`: The exchange types define the functionality of the exchange - i.e. how messages are routed through it. Once an exchange is declared, its type cannot be changed. The common types are "direct", "fanout", "topic" and "headers".
- `queueName`: declares and binds a queue to the exchange. If the queue is empty a random string will be generated by the broker.
- `key`: the binding routing key of the broker used to dispatch messages from the exchange to all the queues matching the routing key of the message in transit on the broker. 

Note: MQTT Producers and Consumers don't need to specify exchange and queue because because RabbitMQ will create a queue called `mqtt-subscription-{client-id}-qos1` and bind it automatically to `amq.topic` with routing key matching the topic / key we'll specify.

More details on the [official RabbitMQ AMQP documentation](https://www.rabbitmq.com/tutorials/amqp-concepts.html)